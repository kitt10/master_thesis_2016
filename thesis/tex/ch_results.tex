\chapter{Experimental Evaluation} \label{chap:results}
In this chapter the methods from previous sections are evaluated and results are presented. In \cref{sec:verification_of_nn} the implemented classification framework called \textit{kitt\_nn} (\cref{chap:kitt_nn} and detailed in \cref{sec:implementation_of_nn}) is verified by comparing to a publicly provided framework. Then, results of the developed pruning algorithm are shown in \cref{sec:pruning_algorithm_results}.

Finally, steps of the overall terrain classification process are gradually evaluated in \cref{sec:terrain_processing_results}.

\section{Verification of the Network Implementation} \label{sec:verification_of_nn}
Classification skills of the implemented method \textit{kitt\_nn} are compared to a \textit{Scikit-neuralnetwork} classifier (\textit{sknn}) presented in \cref{ssec:sknn}. The evaluation is performed on two datasets introduced in \cref{ssec:testing_datasets}.

The following figure \ref{fig:kitt_verify_acc} shows the progress of classification accuracy within learning epochs. For each dataset/framework combination $ 10 $ observations are done mean values with standard deviation ranges are shown.

\begin{figure}[H]
  \centering
  \includegraphics[width=0.8\textwidth]{kitt_verify_acc}
  \caption{Comparison of the learning process to another framework (sknn).}
  \label{fig:kitt_verify_acc}
\end{figure}

Regarding the XOR dataset, both nets start with about $ 0.5 $ accuracy, as there are $ 2 $ classes and, naturally, with about $ 0.1 $ accuracy for the $ 10 $ classes of the MNIST dataset. Individual observations differ more to each other (see the standard deviation in \cref{fig:kitt_verify_acc}) for XOR, as there are much less training samples compared to MNIST (50 times less). However, both nets are able to reach $ 1.0 $ accuracy on XOR within $ 100 $ epochs.

%\begin{figure}[H]
%  \centering
%  \includegraphics[width=0.8\linewidth]{kitt_verify_err}
%  \caption{Comparison of error through learning epochs to another framework (sknn).}
%  \label{fig:kitt_verify_err}
%\end{figure}

In \cref{tab:kitt_verify_f1}, the \textit{f1-score} measure (see \cref{eq:f1_score} in \cref{ssec:evaluation_methods}) is shown for individual classes (digits) of the MNIST dataset. This evaluation is done after $ 100 $ epochs on the testing data of the dataset.

\begin{table}[H]
\centering
\caption{Comparison of f1-score on MNIST to another framework (sknn)}
\label{tab:kitt_verify_f1}
\resizebox{\textwidth}{!} {
\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|}
\hline
\textit{net}  & \textit{0} & \textit{1} & \textit{2} & \textit{3} & \textit{4} & \textit{5} & \textit{6} & \textit{7} & \textit{8} & \textit{9} & \textit{avg}  \\ \hline
\textbf{kitt} & 0.94       & 0.98       & 0.91       & 0.90       & 0.93       & 0.89       & 0.93       & 0.93       & 0.90       & 0.91       & \textbf{0.92} \\ \hline
\textbf{sknn} & 0.96       & 0.97       & 0.92       & 0.91       & 0.93       & 0.89       & 0.94       & 0.93       & 0.90       & 0.91       & \textbf{0.93} \\ \hline
\end{tabular}
}
\end{table}

In \cref{fig:kitt_verify_time}, a comparison of average epoch processing time is shown. The \textit{sknn} library provides an option to use \textit{gpu} in order to decrease the training time, hence also this training variant is included into comparison.

This evaluation is done on the MNIST dataset only, as the training is quite fast for both implementations due to the smaller amount and size of samples.

\begin{figure}[H]
  \centering
  \includegraphics[width=0.8\linewidth]{kitt_verify_time}
  \caption{Comparison of average epoch processing time to another framework (sknn).}
  \label{fig:kitt_verify_time}
\end{figure}

The implemented \textit{kitt\_nn} framework cannot compete with the optimized stochastic \textit{GDA} (see \citep{misc:sknn}) of \textit{sknn} library. However, importantly for this study, the classification abilities have been verified.

\section{Pruning Algorithm Results} \label{sec:pruning_algorithm_results}

\subsection{Evaluation on XOR Dataset} \label{ssec:evaluation_on_xor}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{pa_result_xor}
  \caption{Pruning Algorithm Results on XOR Dataset.}
  \label{fig:pa_result_xor}
\end{figure}

\subsection{Evaluation on MNIST Dataset} \label{ssec:evaluation_on_mnist}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{pa_result_mnist}
  \caption{Pruning Algorithm Results on MNIST Dataset.}
  \label{fig:pa_result_mnist}
\end{figure}

\subsubsection{Minimal Structure Analysis for MNIST} \label{sssec:mnist_analysis}
For instance, considering the MNIST dataset, there is an image (meaning a vector of pixels) as the network input. As the output, there are $ 10 $ classes corresponding to digits. Having the minimal structure, one can find out which pixels are related to e.g. digit $ 5 $ class and/or which pixels are totally useless for classification. This analysis is briefly presented in section X.

\section{Terrain Processing Results} \label{sec:terrain_processing_results}

\subsection{Analysis of Terrain Similarity} \label{ssec:terrains_analysis}
In the following a brief analysis of terrain similarities is presented. In general, a (dis-) similarity between terrains should correlate with classification results, i.e., the more two terrains differ from each other the better classification results are expected, and vice versa.

In order to quantify and visualise similarity among various terrains, a similarity measure was calculated as given in \cref{eq:similarity_measure}. The five qualities are listed in \cref{tab:terrain_features} and in \cref{tab:terrains_parameters}.

\begin{align} \label{eq:similarity_measure}
  SM_{t_1, t_2} = \frac{\displaystyle\sum_{i=1}^{5} \abs{quality(i, t_1) - quality(i, t_2)}}{5}
\end{align} 

The similarity measure equals 0 if two terrains are identical (have the same parameter values) and equals 1.0 if two terrains are totally different.

The following \cref{fig:terrain_similarity_measures} shows the similarity measures among generated terrains.

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{terrains_variability.eps}
  \caption{Similarity measures among various terrain types.}
  \label{fig:terrain_similarity_measures}
\end{figure}

The surfaces have been generated virtually and their similarity to real world terrains has not been verified. However, results demonstrate that foam is very different from ice or, for instance, sand is quite similar to mud. A low similarity measure can be seen among concrete, carpet and rubber as all of them are moreless flat.

Surprisingly, a wooden terrain ended up as very similar to gravel and carpet, but a limited number of simulated terrain features has to be considered. 
On the other hand, rubber results as very different from swamp and snow, which is a positive outcome. Also the high grass-ice or rock-snow similarity measures make sense. 

\subsection{Gathered Data} \label{ssec:gathered_data}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sensor_atr_f_no_noise}
  \caption{Sensor ATRf : mean of 500 samples, 14 terrains}
  \label{fig:sensor_atr_f_no_noise}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sensor_acr_m_no_noise}
  \caption{Sensor ACRm : mean of 500 samples, 14 terrains}
  \label{fig:sensor_acr_m_no_noise}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sensor_afl_h_no_noise}
  \caption{Sensor AFLh : mean of 500 samples, 14 terrains}
  \label{fig:sensor_afl_h_no_noise}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sensor_fl_f_no_noise}
  \caption{Sensor FLf : mean of 500 samples, 14 terrains}
  \label{fig:sensor_fl_f_no_noise}
\end{figure}

\subsection{Built Feature Vector} \label{ssec:built_feature_vectors}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sample_no_noise_0_40}
  \caption{Feature Vector : mean of 500 samples, 14 terrains, no noise, 40 timesteps}
  \label{fig:sample_40t}
\end{figure}


\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sample_no_noise_0_80}
  \caption{Feature Vector : mean of 500 samples, 14 terrains, no noise, 80 timesteps}
  \label{fig:sample_80t}
\end{figure}

\subsection{Terrain Noise Influence} \label{ssec:terrain_noise_influence}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{tn_analysis_40_angle_gravel}
  \caption{Terrain Noise Analysis (samples variance): 500 samples, terrain gravel, angle sensors (feature vector [0:720] for 40 timesteps)}
  \label{fig:tn_analysis_angle_gravel}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{tn_analysis_40_foot_contact_gravel}
  \caption{Terrain Noise Analysis (samples variance): 500 samples, terrain gravel, foot contact sensors (feature vector [720:960] for 40 timesteps)}
  \label{fig:tn_analysis_foot_contact_gravel}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{tn_analysis_40_angle}
  \caption{Terrain Noise Analysis (classes variance): means of 500 samples, 14 terrains, angle sensors}
  \label{fig:tn_analysis_angle}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{tn_analysis_40_foot_contact}
  \caption{Terrain Noise Analysis (classes variance): means of 500 samples, 14 terrains, foot contact sensors}
  \label{fig:tn_analysis_foot_contact}
\end{figure}

\subsection{Signal Noise Influence} \label{ssec:signal_noise_influence}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sn_analysis_one_sample_40_angle_concrete}
  \caption{Signal noise influence on one sample, terrain: concrete, angle sensors}
  \label{fig:sn_analysis_one_sample_angle_concrete}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sn_analysis_one_sample_40_foot_contact_concrete}
  \caption{Signal noise influence on one sample, terrain: concrete, foot contact sensors}
  \label{fig:sn_analysis_one_sample_foot_contact_concrete}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sn_analysis_40_angle_snow}
  \caption{Signal noise analysis : samples variance, terrain: snow, angle sensors}
  \label{fig:sn_analysis_angle_snow}
\end{figure}

\begin{figure}[H]
  \centering
  \includegraphics[width=1.0\textwidth]{sn_analysis_40_foot_contact_snow}
  \caption{Signal noise analysis : samples variance, terrain: snow, foot contact sensors}
  \label{fig:sn_analysis_foot_contact_snow}
\end{figure}

\subsection{Generated Datasets} \label{ssec:generated_datasets}

\begin{table}[H]
\centering
\caption{Generated datasets}
\label{tab:generated_datasets}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
\multicolumn{1}{|l|}{\textit{name}} & \multicolumn{1}{l|}{\textit{ter. noise}} & \multicolumn{1}{l|}{\textit{sig. noise}} & \multicolumn{1}{l|}{\textit{timesteps}} & \multicolumn{1}{l|}{\textit{sensors}} & \multicolumn{1}{l|}{\textit{terrains}} & \multicolumn{1}{l|}{\textit{samples}} \\ \hline
ds\_01                              & 0.0                                             & 0.0                                            & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_02                              & 0.0                                             & 0.0                                            & 40                                      & angle                                 & all                                    & 500                                     \\ \hline
ds\_03                              & 0.0                                             & 0.0                                            & 40                                      & foot                                  & all                                    & 500                                     \\ \hline
ds\_04                              & 0.0                                             & 0.0                                            & 1                                       & all                                   & all                                    & 500                                     \\ \hline
ds\_05                              & 0.0                                             & 0.0                                            & 10                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_06                              & 0.0                                             & 0.0                                            & 80                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_07                              & 0.0                                             & 0.01                                           & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_08                              & 0.0                                             & 0.03                                           & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_09                              & 0.0                                             & 0.05                                           & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_10                              & 0.0                                             & 0.1                                            & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_11                              & 0.01                                            & 0.0                                            & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_12                              & 0.03                                            & 0.0                                            & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_13                              & 0.05                                            & 0.0                                            & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_14                              & 0.1                                             & 0.0                                            & 40                                      & all                                   & all                                    & 500                                     \\ \hline
ds\_15                              & 0.2                                             & 0.0                                            & 40                                      & all                                   & all                                    & 500                                     \\ \hline
\end{tabular}
\end{table}

\subsection{Classification Results} \label{ssec:classification_results}

\begin{table}[H]
\centering
\caption{Classification results}
\label{tab:classification_results}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
\multirow{2}{*}{\textit{dataset}} & \multicolumn{3}{c|}{\textit{\textbf{kitt net}}}         & \multicolumn{3}{c|}{\textit{\textbf{sknn net}}}         \\ \cline{2-7} 
                                  & \textit{accuracy} & \textit{precision} & \textit{recall} & \textit{accuracy} & \textit{precision} & \textit{recall} \\ \hline
ds\_01                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_02                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_03                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_04                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_05                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_06                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_07                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_08                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_09                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_10                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_11                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_12                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_13                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_14                            &                   &                    &                 &                   &                    &                 \\ \hline
ds\_15                            &                   &                    &                 &                   &                    &                 \\ \hline
\end{tabular}
\end{table}

\subsection{Final Configuration} \label{ssec:final_configuration}




evaluation (tables and figures) of classification:
\begin{itemize}
\item various terrain noise standard deviation values
\item various signal noise standard deviation values
\item various sensors on network input (only foot, only angle...)
\item various timesteps used as one sample (-> time needed for detection)
\item various number of detected terrains as outputs
\item various network structures
\item various training parameters (epochs, learning rate, batch size...)
\end{itemize}


evaluation of neural nets as a classifier:
\begin{itemize}
\item comparison to other classifiers on the same data, classifiers are ready provided by sknn library
\end{itemize}

evaluation of proprioception sensing against other methods (visual, haptic, laser...):
\begin{itemize}
\item comparison to the results from the literature
\end{itemize}

evaluation of the pruning algorithm:
\begin{itemize}
\item various starting structures, ends up with the same minimal-optimal structure?
\item various noise types, same minimal structure?
\item speed comparisons of the fully-connected vs. pruned structure
\item further analysis:
 \begin{itemize}
 \item which sensors are redundant/crucial
 \item which sensors are important for which terrain
 \item comments on the minimal structure and benefits of having it
 \end{itemize}
\end{itemize}
10-15 pages (many figures, tables)
